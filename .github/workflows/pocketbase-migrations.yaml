name: PocketHost

on:
  pull_request:
  workflow_dispatch:

jobs:
  copy_pb_migrations:
    name: Copy migrations
    runs-on: ubuntu-latest
    container: finalgene/lftp
    env:
      POCKETHOST_SERVER: ${{ secrets.POCKETHOST_SERVER }}
      POCKETHOST_USERNAME: ${{ secrets.POCKETHOST_USERNAME }}
      POCKETHOST_PASSWORD: ${{ secrets.POCKETHOST_PASSWORD }}
    steps:
    - name: ðŸšš Get latest code
      uses: actions/checkout@v4

    - name: ðŸ“‚ Sync files
      run: lftp -e "mirror -R pocketbase/pb_migrations bunkie-bois/pb_migrations" -u $POCKETHOST_USERNAME,$POCKETHOST_PASSWORD $POCKETHOST_SERVER
